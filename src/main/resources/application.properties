spring.application.name=EventHub API

# --- Banco de dados: H2 (testes locais) ou PostgreSQL ---
# Padrão = H2 em memória. PostgreSQL: use perfil "postgres" OU env SPRING_DATASOURCE_URL (e USERNAME, PASSWORD, DRIVER=org.postgresql.Driver).
# --- 12 Factor App: credenciais via variáveis de ambiente ---
spring.datasource.url=${SPRING_DATASOURCE_URL:jdbc:h2:mem:eventhubdb}
spring.datasource.username=${SPRING_DATASOURCE_USERNAME:sa}
spring.datasource.password=${SPRING_DATASOURCE_PASSWORD:}
spring.datasource.driver-class-name=${SPRING_DATASOURCE_DRIVER:org.h2.Driver}

# --- 12 Factor App: Descartabilidade (Graceful Shutdown) ---
server.shutdown=graceful
spring.lifecycle.timeout-per-shutdown-phase=30s

# H2 (testes locais): console e inicialização
spring.h2.console.enabled=true
spring.jpa.defer-datasource-initialization=true

# JPA
spring.jpa.hibernate.ddl-auto=update
spring.jpa.show-sql=false
spring.jpa.open-in-view=false

# Respostas de erro sem stack trace nem exceção (evita retorno gigante na API)
server.error.include-stacktrace=never
server.error.include-exception=false
server.error.include-message=always

# URL inexistente: lança NoHandlerFoundException para o handler retornar 404 com mensagem
spring.mvc.throw-exception-if-no-handler-found=true
spring.web.resources.add-mappings=false
